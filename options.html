<html>

<head>
    <script src='./script/aframe/aframe.min.js'></script>
    <script src='./script/resonance/resonance.min.js'></script>
    <script src='./script/ukaton/SideMission.js'></script>
</head>

<style>
    .sideMission {
        display: grid;
        grid-template-rows: auto repeat(2, 1fr);
        grid-template-columns: repeat(2, 1fr) 300px;

        grid-template-areas:
            "title settings settings"
            "acceleration linearAcceleration rotationRate"
            "quaternion euler scene";

        width: 100%;
        margin-bottom: 20px;
    }

    .sideMission>div {
        width: 100%;
        height: 100%;
        border: solid black 1px;
        margin: 0;
        padding: 0;
        position: relative;
        background-color: white;
    }

    .sideMission>div>canvas {
        width: 100%;
        height: 100%;
    }

    .sideMission>.title {
        grid-area: title;
        text-align: center;
    }
    .sideMission>.settings {
        grid-area: settings;
    }
    .sideMission.connected>.settings>.connect {
        display: none;
    }
    .sideMission>.settings>.connected {
        width: fit-content;
        float: left;
    }
    .sideMission:not(.connected)>.settings>.connected {
        display: none;
    }

    .sideMission>.acceleration {
        grid-area: acceleration;
    }
    .sideMission>.linearAcceleration {
        grid-area: linearAcceleration;
    }
    .sideMission>.rotationRate {
        grid-area: rotationRate;
    }

    .sideMission>.quaternion {
        grid-area: quaternion;
    }
    .sideMission>.euler {
        grid-area: euler;
    }
    .sideMission>.scene {
        grid-area: scene;
    }
</style>

<body>
    <div id="dpi" style="height: 1in; width: 1in; left: 100%; position: fixed; top: 100%;"></div>

    <h1>Ukaton Side Mission Extension Template</h1>

    <label id="numberOfSideMissions">
        Number of Side Missions: <input type="number" min="1" step="1" value="1" max="6">
    </label>

    <hr>

    <div id="sideMissions">
        <template id="sideMissionTemplate">
            <div class="sideMission">
                <div class="title">
                    <h1>Side Mission #<span class="index"></span></h1>
                </div>
                <div class="settings">
                    <button class="connect">connect</button>
                    
                    <fieldset class="sensors connected">
                        <legend>sensors</legend>
                        <label class="accelerometer">
                            accelerometer <input type="checkbox">
                        </label>
                        <label class="gyroscope">
                            gyroscope <input type="checkbox">
                        </label>
                        <label class="quaternion">
                            quaternion <input type="checkbox">
                        </label>
                    </fieldset>

                    <fieldset class="callibration connected">
                        <legend>callibration</legend>
                        <button class="callibrate">callibrate</button>
                    </fieldset>

                    <fieldset class="screen">
                        <legend>screen (command+click to play sound)</legend>
                        <label class="width">
                            width<input type="number" min="0" value="11" max="100">
                        </label>
                        <label class="height">
                            height<input type="number" min="0" value="7" max="100">
                        </label>
                        <label class="distance">
                            distance<input type="number" min="0" value="20" max="100">
                        </label>
                    </fieldset>
                </div>

                <div class="acceleration">
                    <canvas></canvas>
                </div>
                <div class="linearAcceleration">
                    <canvas></canvas>
                </div>
                <div class="rotationRate">
                    <canvas></canvas>
                </div>

                <div class="quaternion">
                    <canvas></canvas>
                </div>
                <div class="euler">
                    <canvas></canvas>
                </div>

                <div class="scene">
                    <a-scene embedded vr-mode-ui="enabled: false">
                        <a-assets>
                            <a-asset-item id="monkeyAsset" src="./assets/monkey_head/scene.gltf"></a-asset-item>
                            <a-asset-item id="iMacAsset" src="./assets/imac/scene.gltf"></a-asset-item>
                        </a-assets>
                        <a-entity position="-1 0.8 2">
                            <a-entity rotation="0 0 0">
                                <a-camera active position="0 0 0" fov="40"></a-camera>
                            </a-entity>
                        </a-entity>
                        <a-entity id="monkey">
                            <a-entity scale="0.02 0.02 0.02">
                                <a-entity gltf-model="#monkeyAsset" position="0 -20 0" rotation="0 180 0"></a-entity>
                            </a-entity>
                        </a-entity>
                        <a-entity id="iMac" position="0 -0.5 1">
                            <a-entity scale="0.008 0.008 0.008">
                                <a-entity gltf-model="#iMacAsset" rotation="0 90 0"></a-entity>
                            </a-entity>
                        </a-entity>
                        <a-sky color="powderblue"></a-sky>
                    </a-scene>
                </div>
            </div>
        </template>
    </div>
</body>

<script src="./script/options/script.js"></script>

</html>